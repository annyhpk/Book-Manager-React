(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[6],{56:function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var n=c(28).c},57:function(e,t,c){"use strict";var n=c(27),r=c(0);t.a=function(e){var t=Object(r.useState)(e),c=Object(n.a)(t,2),a=c[0],o=c[1];return[a,Object(r.useCallback)((function(e){o(e.currentTarget.value)}),[]),o]}},58:function(e,t,c){"use strict";c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return s})),c.d(t,"c",(function(){return l}));var n=c(12),r=c(15),a=c(16),o=Object(r.b)(a.a,(function(e){var t=[];return Array.isArray(e)&&e.length&&(t=e.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{amount:0})}))),{payload:t}})),s=Object(r.b)(a.b,(function(e){return{payload:e}})),l=Object(r.b)(a.c,(function(e){return{payload:e}}))},96:function(e,t,c){"use strict";c.r(t);var n=c(27),r=c(0),a=c(2),o=c(56),s=c(57),l=c(23),i=c(28),u=c(58),d=c(70),b=c.n(d),j=c(72),h=c(73),m=c.n(h),x=function(){var e=Object(j.a)(b.a.mark((function e(t,c){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI("https://dapi.kakao.com/v3/search/book?target=title&sort=accuracy&page=".concat(t,"&size=10&query=").concat(c)),e.next=3,m.a.get(n,{headers:{Authorization:"KakaoAK ".concat("production")}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),f=c(55),O=c.n(f),g=c(7),p=function(e){var t=e.searchResultInfo,c=e.setSelectedBookList,n=e.selectedBookList,a=Object(r.useCallback)((function(e){var t=e.currentTarget.firstChild.textContent;e.currentTarget&&"TD"===e.currentTarget.firstChild.nodeName&&!n.includes(t)?c((function(e){return[].concat(Object(l.a)(e),[t])})):c((function(e){return e.filter((function(e){return e!==t}))}))}),[n,c]);return Object(g.jsx)(g.Fragment,{children:void 0!==t&&(null===t||void 0===t?void 0:t.map((function(e){var t;return Object(g.jsxs)("tr",{onClick:a,className:n.includes(e.isbn)?"bg-green-400 bg-opacity-30 bg-clip-border":"",children:[Object(g.jsx)("td",{className:"hidden",children:e.isbn}),Object(g.jsx)("td",{children:Object(g.jsx)("img",{className:"transform hover:scale-180 sm:hover:scale-400 hover:translate-x-5 z-2 hover:absolute z-10 transition-all shadow-lg",width:"200",src:e.thumbnail,alt:e.title})}),Object(g.jsxs)("td",{className:"max-w-sm font-bold pl-4 text-left",children:["(".concat(e.status,") ").concat(e.title)," ",Object(g.jsx)("br",{}),Object(g.jsx)("div",{className:"text-gray-400 h-auto text-left font-normal",children:"".concat(null===(t=e.contents)||void 0===t?void 0:t.slice(0,50),"...")})]}),Object(g.jsx)("td",{children:e.authors[0]}),Object(g.jsx)("td",{children:O()(e.datetime).format("YYYY-MM-DD")})]},e.isbn)})))})},v=Object(r.memo)(p),w=function(e){var t=e.show,c=e.children,n=e.onCloseModal,a=Object(r.useRef)(null),o=Object(r.useCallback)((function(e){e.stopPropagation()}),[]),s=Object(r.useCallback)((function(){var e;null===(e=a.current)||void 0===e||e.scrollTo({top:0,behavior:"smooth"})}),[]);return t?Object(g.jsxs)("div",{className:"modal opacity-100 fixed w-full top-0 left-0 flex items-center justify-center",onClick:n,children:[Object(g.jsx)("div",{className:"modal-overlay absolute w-full h-full bg-gray-900 opacity-50"}),Object(g.jsx)("div",{className:"modal-container bg-white w-11/12 h-screen lg:max-w-xl md:max-w-lg mx-auto rounded-xl shadow-lg z-50 overflow-y-auto",onClick:o,ref:a,children:Object(g.jsxs)("div",{className:"modal-content py-4 text-left px-5",children:[Object(g.jsxs)("div",{className:"flex justify-between items-center pb-3 h-11",children:[Object(g.jsx)("p",{className:"text-2xl font-bold",children:"\uc6d0\ud558\ub294 \ub3c4\uc11c\ub97c \ud074\ub9ad-!"}),Object(g.jsx)("div",{className:"modal-close cursor-pointer z-50",onClick:n,children:Object(g.jsx)("svg",{className:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",children:Object(g.jsx)("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})})})]}),c,Object(g.jsx)("div",{className:"flex fixed bottom-12 mr-1 h-10 right-9 md:right-1/4 lg:mr-12 xl:right-1/3 xl:mr-24 bg-indigo-300 rounded-xl",children:Object(g.jsx)("button",{type:"button",onClick:s,className:"px-2 bg-transparent p-3 rounded-xl hover:bg-gray-100 leading-10",children:Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 pb-0.5",fill:"none",viewBox:"0 3 24 24",stroke:"currentColor",children:Object(g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 11l7-7 7 7M5 19l7-7 7 7"})})})})]})})]}):null},k=Object(r.memo)(w),y=function(e){var t=e.show,c=e.onCloseModal,a=e.setShowSearchResultModal,o=e.searchResultInfo,s=e.setSearchResultInfo,d=e.searchValue,b=Object(i.b)(),j=Object(r.useState)([]),h=Object(n.a)(j,2),m=h[0],f=h[1],O=Object(r.useState)(2),p=Object(n.a)(O,2),w=p[0],y=p[1],N=Object(r.useState)(!1),C=Object(n.a)(N,2),M=C[0],L=C[1],S=Object(r.useCallback)((function(e){e.preventDefault(),x(w,d).then((function(e){void 0!==s&&(s((function(t){return[].concat(Object(l.a)(t),Object(l.a)(e.data.documents))})),e.data.meta.is_end&&L(!0)),y((function(e){return e+1}))})).catch((function(e){console.dir(e)}))}),[w,d,s]),R=Object(r.useCallback)((function(e){if(e.preventDefault(),Array.isArray(o)&&o.length){var t=null===o||void 0===o?void 0:o.filter((function(e){return m.includes(e.isbn)}));b(Object(u.a)(t))}a(!1),f([])}),[b,o,m,a]);return Object(r.useEffect)((function(){L(!1)}),[t]),Object(g.jsx)(k,{show:t,onCloseModal:c,children:t&&Array.isArray(o)&&!(null===o||void 0===o?void 0:o.length)?Object(g.jsx)("div",{children:"\ucc3e\uc73c\uc2dc\ub294 \ucc45\uc815\ubcf4\ub97c \ucc3e\uc9c0 \ubabb\ud558\uc600\uc2b5\ub2c8\ub2e4."}):Object(g.jsxs)("form",{onSubmit:R,children:[Object(g.jsxs)("table",{className:"table-auto text-center border-gray-600 border-t-2",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"\ub3c4\uc11c"}),Object(g.jsx)("th",{children:"(\uc0c1\ud0dc)\ub3c4\uc11c\uba85"}),Object(g.jsx)("th",{children:"\uc800\uc790"}),Object(g.jsx)("th",{children:"\ucd9c\ud310\uc77c"})]})}),Object(g.jsx)("tbody",{children:Object(g.jsx)(v,{searchResultInfo:o,setSelectedBookList:f,selectedBookList:m})})]}),M?Object(g.jsx)("div",{className:"h-11 w-full rounded-b-xl bg-gray-300 text-center leading-loose",children:"\ub9c8\uc9c0\ub9c9 \uac80\uc0c9\uacb0\uacfc\uc785\ub2c8\ub2e4."}):Object(g.jsx)("button",{className:"h-11 w-full rounded-b-xl bg-gray-300",type:"button",onClick:S,children:"\uacb0\uacfc \ub354\ubcf4\uae30"}),Object(g.jsx)("div",{className:"flex fixed bottom-0.5 mr-1.5 right-9 md:right-1/4 lg:mr-12 xl:right-1/3 xl:mr-14 h-10 bg-green-200 rounded-xl",children:Object(g.jsx)("button",{type:"submit",className:"px-2 bg-transparent p-3 rounded-xl text-gray-700 hover:bg-green-100 hover:text-gray-900 leading-4",children:"\ub3c4\uc11c\ub4f1\ub85d"})})]})})},N=function(e){var t=e.currentPage,c=e.totalPage,n=Object(a.g)(),o=Object(r.useCallback)((function(e){e.preventDefault(),n.push("/books/".concat(e.target.value))}),[n]),s=Object(r.useCallback)((function(){n.push("/books/1")}),[n]),l=Object(r.useCallback)((function(){n.push("/books/".concat(c))}),[n,c]),i=Object(r.useCallback)((function(){c>t&&n.push("/books/".concat(t+1))}),[n,t,c]),u=Object(r.useCallback)((function(){t>1&&n.push("/books/".concat(t-1))}),[n,t]),d=Object(r.useMemo)((function(){for(var e=Math.ceil(t/5),n=5*e,r=n>c?c:n,a=[],o=e;o<=r;++o)a.push(o);return a}),[t,c]);return t?Object(g.jsxs)("div",{className:"flex flex-row justify-evenly w-full h-16 py-6 relative left-0 bottom-0 md:-bottom-8 md:px-20 lg:px-56",children:[Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 bg-gray-400 rounded-md shadow-md",viewBox:"0 0 20 20",fill:"currentColor",onClick:s,children:Object(g.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z",clipRule:"evenodd"})}),Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 bg-gray-400 rounded-md shadow-md",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:u,children:Object(g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),null===d||void 0===d?void 0:d.map((function(e){return Object(g.jsx)("button",{className:"h-6 w-6 rounded-md shadow-md ".concat(t===e?"bg-gray-500 font-bold":"bg-gray-400"),onClick:o,value:e,children:e},e)})),Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 bg-gray-400 rounded-md shadow-md",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:i,children:Object(g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 bg-gray-400 rounded-md shadow-sm",transform:"rotate(180)",viewBox:"0 0 20 20",fill:"currentColor",onClick:l,children:Object(g.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z",clipRule:"evenodd"})})]}):null},C=Object(r.memo)(N),M=c(19),L=function(e){var t=e.pageOfbooksInfo,c=e.pageNum;return Object(g.jsx)(g.Fragment,{children:void 0!==t&&(null===t||void 0===t?void 0:t.map((function(e,t){return Object(g.jsxs)("tr",{children:[Object(g.jsxs)("td",{children:[Object(g.jsx)("b",{children:"[".concat(e.status,"]")})," ",Object(g.jsx)(M.b,{to:"/book/".concat(t*c,"/").concat(e.isbn),children:e.title})]}),Object(g.jsx)("td",{children:e.authors[0]}),Object(g.jsx)("td",{children:e.amount}),Object(g.jsx)("td",{children:O()(e.datetime).format("YYYY-MM-DD")})]},e.isbn)})))})},S=Object(r.memo)(L);t.default=function(){var e=Object(a.g)(),t=Object(a.h)().page,c=Object(r.useMemo)((function(){return parseInt(t)}),[t]),l=Object(s.a)(""),i=Object(n.a)(l,2),u=i[0],d=i[1],b=Object(r.useState)(!1),j=Object(n.a)(b,2),h=j[0],m=j[1],f=Object(r.useState)([]),O=Object(n.a)(f,2),p=O[0],v=O[1],w=Object(r.useMemo)((function(){return[15*(c-1),15*c]}),[c]),k=Object(n.a)(w,2),N=k[0],M=k[1],L=Object(o.a)((function(e){return e.book.documents})),R=Object(r.useMemo)((function(){return null===L||void 0===L?void 0:L.slice(N,M)}),[L,M,N]),z=Object(r.useMemo)((function(){return Math.ceil(L.length/15)}),[L]),B=Object(r.useCallback)((function(){m(!1)}),[]),I=Object(r.useCallback)((function(e){if(e.preventDefault(),""===u.trim()&&!u.trim().length)return null;x(c,u).then((function(e){m(!0),v(e.data.documents)})).catch((function(e){console.dir(e)}))}),[c,u]);return(isNaN(c)||!c||c>z)&&e.push("/notFound"),Object(g.jsxs)("div",{className:"container pt-8 mx-auto md:pt-16",children:[Object(g.jsxs)("header",{className:"flex w-full h-10 justify-around flex-wrap flex-row",children:[Object(g.jsxs)("div",{className:"inline-flex flex-nowrap",children:[Object(g.jsx)("img",{className:"mr-3",width:"40",height:"40",alt:"Book Logo",src:"https://cdn.pixabay.com/photo/2016/01/23/16/02/book-1157658_960_720.png"}),Object(g.jsx)("b",{className:"sm:text-base md:text-3xl",children:"\ub3c4\uc11c \uad00\ub9ac \uc2dc\uc2a4\ud15c"})]}),Object(g.jsx)("form",{className:"pt-1 h-10",onSubmit:I,children:Object(g.jsx)("input",{className:"rounded-lg text-center border",type:"search",placeholder:"\ub3c4\uc11c\uba85\uc73c\ub85c \uac80\uc0c9",value:u,onChange:d})})]}),Object(g.jsx)("main",{className:"flex flex-col mt-8 mx-3 sm:mt-4 md:mx-8 lg:mx-24 justify-center",children:Object(g.jsxs)("table",{className:"table-auto border-separate text-center",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{className:"whitespace-nowrap",children:[Object(g.jsx)("th",{children:"(\uc0c1\ud0dc) \ub3c4\uc11c\uba85"}),Object(g.jsx)("th",{children:"\uae00\uc4f4\uc774"}),Object(g.jsx)("th",{children:"\ubcf4\uc720"}),Object(g.jsx)("th",{children:"\ucd9c\ud310\uc77c"})]})}),Object(g.jsx)("tbody",{children:Object(g.jsx)(S,{pageOfbooksInfo:R,pageNum:c})})]})}),Object(g.jsx)(C,{currentPage:c,totalPage:z}),Object(g.jsx)(y,{show:h,onCloseModal:B,setShowSearchResultModal:m,searchResultInfo:p,setSearchResultInfo:v,searchValue:u})]})}}}]);
//# sourceMappingURL=6.1be7d3e1.chunk.js.map