(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[5],{56:function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var n=c(28).c},57:function(e,t,c){"use strict";var n=c(27),a=c(0);t.a=function(e){var t=Object(a.useState)(e),c=Object(n.a)(t,2),r=c[0],s=c[1];return[r,Object(a.useCallback)((function(e){s(e.target.value)}),[]),s]}},58:function(e,t,c){"use strict";c.d(t,"a",(function(){return s})),c.d(t,"b",(function(){return l})),c.d(t,"c",(function(){return o}));var n=c(12),a=c(14),r=c(16),s=Object(a.b)(r.a,(function(e){var t=[];return Array.isArray(e)&&e.length&&(t=e.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{amount:0})}))),{payload:t}})),l=Object(a.b)(r.b,(function(e){return{payload:e}})),o=Object(a.b)(r.c,(function(e){return{payload:e}}))},94:function(e,t,c){"use strict";c.r(t);var n=c(27),a=c(0),r=c(2),s=c(19),l=c(56),o=c(57),i=c(23),d=c(28),u=c(58),b=c(70),j=c.n(b),h=c(72),x=c(73),m=c.n(x),f=function(){var e=Object(h.a)(j.a.mark((function e(t,c){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI("https://dapi.kakao.com/v3/search/book?target=title&sort=accuracy&page=".concat(t,"&size=10&query=").concat(c)),e.next=3,m.a.get(n,{headers:{Authorization:"KakaoAK ".concat(env.NODE_ENV)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),O=c(55),g=c.n(O),v=c(7),p=function(e){var t=e.searchResultInfo,c=e.setSelectedBookList,n=e.selectedBookList,r=Object(a.useCallback)((function(e){var t=e.currentTarget.firstChild.textContent;e.currentTarget&&"TD"===e.currentTarget.firstChild.nodeName&&!n.includes(t)?c((function(e){return[].concat(Object(i.a)(e),[t])})):c((function(e){return e.filter((function(e){return e!==t}))}))}),[n,c]);return Object(v.jsx)(v.Fragment,{children:void 0!==t&&(null===t||void 0===t?void 0:t.map((function(e){var t;return Object(v.jsxs)("tr",{onClick:r,className:n.includes(e.isbn)?"bg-green-400 bg-opacity-30 bg-clip-border":"",children:[Object(v.jsx)("td",{className:"hidden",children:e.isbn}),Object(v.jsx)("td",{children:Object(v.jsx)("img",{className:"transform hover:scale-180 sm:hover:scale-400 hover:translate-x-5 z-2 hover:absolute z-10 transition-all shadow-lg",src:e.thumbnail,alt:e.title})}),Object(v.jsxs)("td",{className:"max-w-sm font-bold pl-4 text-left",children:["(".concat(e.status,") ").concat(e.title)," ",Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"text-gray-400 h-auto text-left font-normal",children:"".concat(null===(t=e.contents)||void 0===t?void 0:t.slice(0,50),"...")})]}),Object(v.jsx)("td",{children:e.authors[0]}),Object(v.jsx)("td",{children:g()(e.datetime).format("YYYY-MM-DD")})]},e.isbn)})))})},w=Object(a.memo)(p),k=function(e){var t=e.show,c=e.children,n=e.onCloseModal,r=Object(a.useRef)(null),s=Object(a.useCallback)((function(e){e.stopPropagation()}),[]),l=Object(a.useCallback)((function(){var e;null===(e=r.current)||void 0===e||e.scrollTo({top:0,behavior:"smooth"})}),[]);return t?Object(v.jsxs)("div",{className:"modal opacity-100 fixed w-full top-0 left-0 flex items-center justify-center",onClick:n,children:[Object(v.jsx)("div",{className:"modal-overlay absolute w-full h-full bg-gray-900 opacity-50"}),Object(v.jsx)("div",{className:"modal-container bg-white w-11/12 h-screen lg:max-w-xl md:max-w-lg mx-auto rounded-xl shadow-lg z-50 overflow-y-auto",onClick:s,ref:r,children:Object(v.jsxs)("div",{className:"modal-content py-4 text-left px-5",children:[Object(v.jsxs)("div",{className:"flex justify-between items-center pb-3 h-11",children:[Object(v.jsx)("p",{className:"text-2xl font-bold",children:"\uc6d0\ud558\ub294 \ub3c4\uc11c\ub97c \ud074\ub9ad-!"}),Object(v.jsx)("div",{className:"modal-close cursor-pointer z-50",onClick:n,children:Object(v.jsx)("svg",{className:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",children:Object(v.jsx)("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})})})]}),c,Object(v.jsx)("div",{className:"flex fixed bottom-12 mr-1 h-10 right-9 md:right-1/4 lg:mr-12 xl:right-1/3 xl:mr-24 bg-indigo-300 rounded-xl",children:Object(v.jsx)("button",{type:"button",onClick:l,className:"px-2 bg-transparent p-3 rounded-xl hover:bg-gray-100 leading-10",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 pb-0.5",fill:"none",viewBox:"0 3 24 24",stroke:"currentColor",children:Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 11l7-7 7 7M5 19l7-7 7 7"})})})})]})})]}):null},y=Object(a.memo)(k),N=function(e){var t=e.show,c=e.onCloseModal,r=e.setShowSearchResultModal,s=e.searchResultInfo,l=e.setSearchResultInfo,o=e.searchValue,b=Object(d.b)(),j=Object(a.useState)([]),h=Object(n.a)(j,2),x=h[0],m=h[1],O=Object(a.useState)(2),g=Object(n.a)(O,2),p=g[0],k=g[1],N=Object(a.useState)(!1),C=Object(n.a)(N,2),M=C[0],L=C[1],S=Object(a.useCallback)((function(e){e.preventDefault(),f(p,o).then((function(e){void 0!==l&&(l((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e.data.documents))})),e.data.meta.is_end&&L(!0)),k((function(e){return e+1}))})).catch((function(e){console.dir(e)}))}),[p,o,l]),R=Object(a.useCallback)((function(e){if(e.preventDefault(),Array.isArray(s)&&s.length){var t=null===s||void 0===s?void 0:s.filter((function(e){return x.includes(e.isbn)}));b(Object(u.a)(t))}r(!1),m([])}),[b,s,x,r]);return Object(a.useEffect)((function(){L(!1)}),[t]),Object(v.jsx)(y,{show:t,onCloseModal:c,children:t&&Array.isArray(s)&&!(null===s||void 0===s?void 0:s.length)?Object(v.jsx)("div",{children:"\ucc3e\uc73c\uc2dc\ub294 \ucc45\uc815\ubcf4\ub97c \ucc3e\uc9c0 \ubabb\ud558\uc600\uc2b5\ub2c8\ub2e4."}):Object(v.jsxs)("form",{onSubmit:R,children:[Object(v.jsxs)("table",{className:"table-auto text-center border-gray-600 border-t-2",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"\ub3c4\uc11c"}),Object(v.jsx)("th",{children:"(\uc0c1\ud0dc)\ub3c4\uc11c\uba85"}),Object(v.jsx)("th",{children:"\uc800\uc790"}),Object(v.jsx)("th",{children:"\ucd9c\ud310\uc77c"})]})}),Object(v.jsx)("tbody",{children:Object(v.jsx)(w,{searchResultInfo:s,setSelectedBookList:m,selectedBookList:x})})]}),M?Object(v.jsx)("div",{className:"h-11 w-full rounded-b-xl bg-gray-300 text-center leading-loose",children:"\ub9c8\uc9c0\ub9c9 \uac80\uc0c9\uacb0\uacfc\uc785\ub2c8\ub2e4."}):Object(v.jsx)("button",{className:"h-11 w-full rounded-b-xl bg-gray-300",type:"button",onClick:S,children:"\uacb0\uacfc \ub354\ubcf4\uae30"}),Object(v.jsx)("div",{className:"flex fixed bottom-0.5 mr-1.5 right-9 md:right-1/4 lg:mr-12 xl:right-1/3 xl:mr-14 h-10 bg-green-200 rounded-xl",children:Object(v.jsx)("button",{type:"submit",className:"px-2 bg-transparent p-3 rounded-xl text-gray-700 hover:bg-green-100 hover:text-gray-900 leading-4",children:"\ub3c4\uc11c\ub4f1\ub85d"})})]})})},C=function(e){var t=e.currentPage,c=e.totalPage,n=Object(r.g)(),s=Object(a.useCallback)((function(e){e.preventDefault(),n.push("/books/".concat(e.target.value))}),[n]),l=Object(a.useCallback)((function(){n.push("/books/1")}),[n]),o=Object(a.useCallback)((function(){n.push("/books/".concat(c))}),[n,c]),i=Object(a.useCallback)((function(){var e=c>t?t+1:t;n.push("/books/".concat(e))}),[n,t,c]),d=Object(a.useCallback)((function(){var e=t>0?t-1:t;n.push("/books/".concat(e))}),[n,t]),u=Object(a.useMemo)((function(){for(var e=Math.ceil(t/5),n=5*e,a=n>c?c:n,r=[],s=e;s<=a;++s)r.push(s);return r}),[t,c]);return t?Object(v.jsxs)("div",{className:"flex flex-row justify-evenly w-full h-16 py-6 relative left-0 bottom-0 md:-bottom-8 md:px-20 lg:px-56",children:[Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 bg-gray-400 rounded-md shadow-md",viewBox:"0 0 20 20",fill:"currentColor",onClick:l,children:Object(v.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z",clipRule:"evenodd"})}),Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 bg-gray-400 rounded-md shadow-md",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:d,children:Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),null===u||void 0===u?void 0:u.map((function(e){return Object(v.jsx)("button",{className:"h-6 w-6 rounded-md shadow-md ".concat(t===e?"bg-gray-500 font-bold":"bg-gray-400"),onClick:s,value:e,children:e},e)})),Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 bg-gray-400 rounded-md shadow-md",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:i,children:Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 bg-gray-400 rounded-md shadow-sm",transform:"rotate(180)",viewBox:"0 0 20 20",fill:"currentColor",onClick:o,children:Object(v.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z",clipRule:"evenodd"})})]}):null},M=Object(a.memo)(C);t.default=function(){var e=Object(r.g)(),t=Object(r.h)().page,c=parseInt(t),i=Object(o.a)(""),d=Object(n.a)(i,2),u=d[0],b=d[1],j=Object(a.useState)(!1),h=Object(n.a)(j,2),x=h[0],m=h[1],O=Object(a.useState)([]),p=Object(n.a)(O,2),w=p[0],k=p[1],y=Object(a.useMemo)((function(){return[15*(c-1),15*c]}),[c]),C=Object(n.a)(y,2),L=C[0],S=C[1],R=Object(l.a)((function(e){return e.book.documents})),z=null===R||void 0===R?void 0:R.slice(L,S);console.dir(z);var B=Object(a.useMemo)((function(){return Math.ceil(R.length/15)}),[R]),D=Object(a.useCallback)((function(){m(!1)}),[]),A=Object(a.useCallback)((function(e){if(e.preventDefault(),""===u.trim()&&!u.trim().length)return null;f(c,u).then((function(e){m(!0),k(e.data.documents)})).catch((function(e){console.dir(e)}))}),[c,u]);return(isNaN(c)||!c||c>B)&&e.push("/notFound"),Object(v.jsxs)("div",{className:"container pt-8 mx-auto md:pt-16",children:[Object(v.jsxs)("header",{className:"flex w-full h-10 justify-around flex-wrap flex-row",children:[Object(v.jsxs)("div",{className:"inline-flex flex-nowrap",children:[Object(v.jsx)("img",{className:"mr-3",width:"40",height:"40",alt:"Book Logo",src:"https://cdn.pixabay.com/photo/2016/01/23/16/02/book-1157658_960_720.png"}),Object(v.jsx)("b",{className:"sm:text-base md:text-3xl",children:"\ub3c4\uc11c \uad00\ub9ac \uc2dc\uc2a4\ud15c"})]}),Object(v.jsx)("form",{className:"pt-1 h-10",onSubmit:A,children:Object(v.jsx)("input",{className:"rounded-lg text-center border",type:"search",placeholder:"\ub3c4\uc11c\uba85\uc73c\ub85c \uac80\uc0c9",value:u,onChange:b})})]}),Object(v.jsx)("main",{className:"flex flex-col mt-8 mx-3 sm:mt-4 md:mx-8 lg:mx-24 justify-center",children:Object(v.jsxs)("table",{className:"table-auto border-separate text-center",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"whitespace-nowrap",children:[Object(v.jsx)("th",{children:"(\uc0c1\ud0dc) \ub3c4\uc11c\uba85"}),Object(v.jsx)("th",{children:"\uae00\uc4f4\uc774"}),Object(v.jsx)("th",{children:"\ubcf4\uc720"}),Object(v.jsx)("th",{children:"\ucd9c\ud310\uc77c"})]})}),Object(v.jsx)("tbody",{children:null===z||void 0===z?void 0:z.map((function(e,t){return Object(v.jsxs)("tr",{children:[Object(v.jsxs)("td",{children:[Object(v.jsx)("b",{children:"[".concat(e.status,"]")})," ",Object(v.jsx)(s.b,{to:"/book/".concat(t*c,"/").concat(e.isbn),children:e.title})]}),Object(v.jsx)("td",{children:e.authors[0]}),Object(v.jsx)("td",{children:e.amount}),Object(v.jsx)("td",{children:g()(e.datetime).format("YYYY-MM-DD")})]},e.isbn)}))})]})}),Object(v.jsx)(M,{currentPage:c,totalPage:B}),Object(v.jsx)(N,{show:x,onCloseModal:D,setShowSearchResultModal:m,searchResultInfo:w,setSearchResultInfo:k,searchValue:u})]})}}}]);
//# sourceMappingURL=5.078a1149.chunk.js.map